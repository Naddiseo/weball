class User
	member uint id
		auto_increment
		pk
	end
	member uint role
	end
	member string username
		range 3 30
	end 
	member string email
		range 5 255
		email_t
	end
	member string password
		range 32 32
		password_t
	end
	member float timezone
	end
	member uint active
		range 0 5
	end
	member uint lastturntime
	end
	member uint datecreated
	end
	member uint datebanned
	end
	member string reason
		range 0 1024
	end
	member uint nation
	end
	member uint commander 0
	end
	member uint clicks
	end
	member uint food 50000
	end
	member uint steel 50000
	end
	member uint oil 50000
	end
	member uint exp
	end
	member uint gold 50000
	end
	member uint morale 5000
	end
	member uint rank
	end
	member uint civilains 50000
	end
	member uint airforce
	end
	member uint army
	end
	member uint naval
	end
	member uint spies
	end
	member uint newmessage
	end
	member uint totalmessages
	end
	index username

	dbfunction login email password
		return id active lastturntime
	end
	
	dbfunction usernameEmailExists username email
		var uint uCount
		var uint uCount2
		
		#select_into "count(*)" uCount
		sql "select count(*) into uCount from #db#.User u where u.username like username or u.email like email"
		sql "select count(*) into uCount2 from #db#.UserSignup u where u.username like username or u.email like email"
		sql "select (uCount + uCount2) as retCode"
	end
end

class UserSignup
	member string activationkey
		range 40 40
		pk true
	end
	member string username
		range 3 30
	end
	member string email
		range 5 50
	end
	member float timezone
	end
	member uint datecreated
	end
	member uint nation
		range 0 5
	end
end

class Stats
	member uint id
		auto_increment
		pk
	end
	member uint aerial
	end
	member uint terrestrial
	end
	member uint marine
	end
	member uint covert
	end
	member uint retaliation
	end
end

class Ranks
	member uint id
		auto_increment
		pk
	end
	member uint aerial
	end
	member uint terrestrial
	end
	member uint marine
	end
	member uint covert
	end
	member uint retaliation
	end
end

class Infrastructure
	member uint id
		auto_increment
		pk
	end
	member uint houses 500
	end
	member uint hospitals
	end
	member uint laboratories
	end
	member uint farms
	end
	member uint mines
	end
	member uint barracks
	end
	member uint airfields
	end
end

class DivisionArtillery
	member uint userid
		pk true
	end
	member uint divisionid
		pk 1
	end
	member uint what
	end
	member uint count
	end
	member uint damage
	end
	member uint strength
	end
end

class Division
	member uint id
		auto_increment
		pk
	end
	member uint userid
	end
	member uint active
	end
	member strin name
		range 3 30
	end
	index userid
end

class BuyQueue
	member uint id
		auto_increment
		pk
	end
	member uint userid
	end
	member uint what
	end
	member uint ticks
	end
	member uint quantity
	end
	member uint civilians
	end
	index userid
end

class Attack
	member id
		uint
		auto_increment
		pk
	end
	member time
		uint
	end
	member attackerid
		uint
	end
	member defenderid
		uint
	end
	member ticks
		uint
	end
	member attackerdivisionid
		uint
	end
	member defenderdivisionid
		uint
	end
	member food
		uint
	end
	member steel
		uint
	end
	member oil
		uint
	end
	member gold
		uint
	end
end

class Arsenal
	member id
		uint
		auto_increment
		pk
	end
	member planes
		uint
	end
	member bombers
		uint
	end
	member weapons
		uint
	end
	member tanks
		uint
	end
	member battleships
		uint
	end
	member submarines
		uint
	end
end
