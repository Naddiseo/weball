class User {
	dbfunction foo() {
		for(int i;i;i=i+1) {
			4;
		}
	}
}
__END
class User :primary(id) {
	int    id :auto_increment;
	string username;
	string email;
	int    status;
	
	dbfunction getByStatus(int $status = 0) {
		string filter :foo = "hi";
		return 
			from(User)
				->read(id, username)
				->where(status == $status);
	}
	
	dbfunction getUserMeta(int $id) {
		return
			from(User)
				->read(id, username, email, status)
				->where(id == $id)
			->innerjoin(UserMeta)
				->read(metadata)
				->where(id == $id);
	}
}

class UserMeta :primary(id) {
	int id :auto_increment;
	string metadata :match('/[a-z]+/');
}
